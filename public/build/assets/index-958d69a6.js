import{L as q}from"./main-29c7ebb4.js";import{P as G}from"./page-header-5e34e666.js";import{P as J}from"./pagination-8da4822a.js";import{a as K}from"./axios-4d564c32.js";import{C as O}from"./flatpickr-5a27b0d4.js";import{_ as W,r as a,c as v,w as t,o as p,a as e,d as l,t as d,b as o,h as w,v as C,e as h,f as x,F as D,m as X,i as Z,s as $}from"../js/app2.js";import"./logo-light-deb27e23.js";import"./logo-9faa3827.js";import"./avatar-1-15b743f1.js";import"./avatar-3-36dc574b.js";const ee={components:{Layout:q,PageHeader:G,Pagination:J,flatPickr:O},data(){return{searchQuery:null,resultQuery:[],result:[],defaultDateConfig:{dateFormat:"d M, Y",defaultDate:"25 Dec, 2021"},perPage:1,currentPage:1,totalRecords:1,lastPage:1,from:1,to:1,status:"all",processing:!1,isFetchError:!1,fetchError:null,accessToken:null,sanitizedToken:null}},mounted(){localStorage.getItem("accessToken")!=null&&(this.accessToken=localStorage.getItem("accessToken"),this.sanitizedToken=this.accessToken.replace(/^"(.*)"$/,"$1"))},watch:{searchQuery(r){if(r){const s=r.toLowerCase();this.resultQuery=this.displayedPosts.filter(c=>c.name.toLowerCase().includes(s)||c.email.toLowerCase().includes(s)||c.address.toLowerCase().includes(s)||c.phone.toLowerCase().includes(s))}else this.resultQuery=this.result}},computed:{displayedPosts(){return this.resultQuery}},methods:{paginate(r){this.totalRecords=r.total,this.perPage=r.per_page,this.from=r.from,this.to=r.to,this.lastPage=r.last_page,this.currentPage=r.current_page},async listData(r=1){try{const s=await K.get(`/api/admin/users/list?page=${r}`,{headers:{Authorization:`Bearer ${this.sanitizedToken}`}});if(s.status===200){const c=s.data;c.error==!1&&c.message=="success"?(this.resultQuery=c.result.data,this.result=c.result.data,this.paginate(c.result)):c.error==!0&&(this.fetchError=c.message,this.isFetchError=c.error)}}catch(s){s.response.status===403&&this.$router.push("/error/403"),console.error("Error fetching data:",s)}},async SearchData(){return this.listData(this.page,this.status)}}},te={class:"d-flex align-items-center"},oe={class:"flex-shrink-0"},le=o("i",{class:"mdi mdi-refresh"},null,-1),se=o("i",{class:"mdi mdi-dots-vertical"},null,-1),ae=o("option",{value:"",selected:""},"Status",-1),ne=o("option",{value:"all"},"All",-1),re=o("option",{value:"interested"},"Interested",-1),ie=o("option",{value:"not_interested"},"Not Interested",-1),ce=[ae,ne,re,ie],de=o("option",{value:"all"},"Select Type",-1),ue=o("option",{value:"Full Time"},"Full Time",-1),_e=o("option",{value:"Part Time"},"Part Time",-1),me=[de,ue,_e],pe=o("i",{class:"mdi mdi-filter-outline align-middle"},null,-1),fe={class:"table-responsive"},he={key:0},ge={class:"list-unstyled hstack gap-1 mb-0"},be={"data-bs-toggle":"tooltip","data-bs-placement":"top","aria-label":"View"},Be=o("i",{class:"mdi mdi-eye-outline"},null,-1),ye={"data-bs-toggle":"tooltip","data-bs-placement":"top","aria-label":"Edit"},Te=o("i",{class:"mdi mdi-pencil-outline"},null,-1),Pe={"data-bs-toggle":"tooltip","data-bs-placement":"top","aria-label":"Delete"},ke=o("i",{class:"mdi mdi-delete-outline"},null,-1),ve={class:"text-muted mb-0"},we={"aria-label":"Page navigation example",class:"mb-0"};function Ce(r,s,c,xe,i,V){const S=a("PageHeader"),L=a("BAlert"),F=a("BCardTitle"),g=a("BLink"),b=a("BDropdownItem"),E=a("BDropdown"),f=a("BCardBody"),Q=a("BFormInput"),u=a("BCol"),A=a("flat-pickr"),U=a("BButton"),B=a("BRow"),_=a("BTh"),y=a("BTr"),N=a("BThead"),m=a("BTd"),I=a("router-link"),T=a("Blink"),R=a("BTbody"),j=a("BTableSimple"),z=a("BPagination"),P=a("BCard"),H=a("Layout");return p(),v(H,null,{default:t(()=>[e(S,{title:"Users List",pageTitle:"Users"}),e(L,{modelValue:i.isFetchError,"onUpdate:modelValue":s[0]||(s[0]=n=>i.isFetchError=n),variant:"danger",class:"mt-3",dismissible:""},{default:t(()=>[l(d(i.fetchError),1)]),_:1},8,["modelValue"]),e(B,null,{default:t(()=>[e(u,{lg:"12"},{default:t(()=>[e(P,{"no-body":""},{default:t(()=>[e(f,{class:"border-bottom"},{default:t(()=>[o("div",te,[e(F,{class:"mb-0 flex-grow-1"},{default:t(()=>[l("Client Lists")]),_:1}),o("div",oe,[e(g,{href:"/users/create",class:"btn btn-primary me-1"},{default:t(()=>[l("Add New User")]),_:1}),e(g,{href:"#!",class:"btn btn-light me-1"},{default:t(()=>[le]),_:1}),e(E,{variant:"success",class:"job-list-dropdown"},{"button-content":t(()=>[se]),default:t(()=>[e(b,{href:"#"},{default:t(()=>[l("Action")]),_:1}),e(b,{href:"#"},{default:t(()=>[l("Another action")]),_:1}),e(b,{href:"#"},{default:t(()=>[l("Something else here")]),_:1})]),_:1})])])]),_:1}),e(f,{class:"border-bottom"},{default:t(()=>[e(B,{class:"g-3"},{default:t(()=>[e(u,{xxl:"4",lg:"6"},{default:t(()=>[e(Q,{type:"text",class:"form-control search",placeholder:"Search for ...",modelValue:i.searchQuery,"onUpdate:modelValue":s[1]||(s[1]=n=>i.searchQuery=n)},null,8,["modelValue"])]),_:1}),e(u,{xxl:"2",lg:"6"},{default:t(()=>[w(o("select",{"close-on-select":!0,searchable:!0,"onUpdate:modelValue":s[2]||(s[2]=n=>this.status=n),placeholder:"Status","create-option":!0,class:"form-select",id:"idStatus","aria-label":"Default select example"},ce,512),[[C,this.status]])]),_:1}),e(u,{xxl:"2",lg:"6"},{default:t(()=>[w(o("select",{id:"idType","aria-label":"Default select example","onUpdate:modelValue":s[3]||(s[3]=n=>r.value1=n),"close-on-select":!0,searchable:!0,"create-option":!0,placeholder:"Select Type",class:"form-select"},me,512),[[C,r.value1]])]),_:1}),e(u,{xxl:"2",lg:"6"},{default:t(()=>[e(A,{modelValue:r.date6,"onUpdate:modelValue":s[4]||(s[4]=n=>r.date6=n),config:i.defaultDateConfig,class:"form-control",placeholder:"Select date"},null,8,["modelValue","config"])]),_:1}),e(u,{xxl:"2",lg:"6"},{default:t(()=>[e(U,{variant:"soft-secondary",onClick:V.SearchData,class:"w-100"},{default:t(()=>[pe,l(" Filter ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[o("div",fe,[e(j,{class:"align-middle dt-responsive nowrap w-100 table-check",id:"job-list"},{default:t(()=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(_,{scope:"col"},{default:t(()=>[l("No")]),_:1}),e(_,{scope:"col"},{default:t(()=>[l("Name")]),_:1}),e(_,{scope:"col"},{default:t(()=>[l("Email")]),_:1}),e(_,{scope:"col"},{default:t(()=>[l("Phone")]),_:1}),e(_,{scope:"col"},{default:t(()=>[l("Role")]),_:1}),e(_,{scope:"col"},{default:t(()=>[l("Address")]),_:1}),e(_,{scope:"col"},{default:t(()=>[l("Action")]),_:1})]),_:1})]),_:1}),e(R,null,{default:t(()=>[(p(!0),h(D,null,x(this.resultQuery,(n,M)=>(p(),v(y,{key:n.id},{default:t(()=>[e(_,{scope:"row"},{default:t(()=>[l(d((i.currentPage-1)*i.perPage+M+1),1)]),_:2},1024),e(m,null,{default:t(()=>[l(d(n.name),1)]),_:2},1024),e(m,null,{default:t(()=>[l(d(n.email),1)]),_:2},1024),e(m,null,{default:t(()=>[l(d(n.phone),1)]),_:2},1024),e(m,null,{default:t(()=>[(p(!0),h(D,null,x(n.roles,(Y,k)=>(p(),h("div",{key:k},[e(g,{href:"javascript: void(0);",class:"badge badge-soft-primary font-size-11 m-1"},{default:t(()=>[l(d(Y.name)+" ",1),k!==n.roles.length-1?(p(),h("span",he,", ")):$("",!0)]),_:2},1024)]))),128))]),_:2},1024),e(m,null,{default:t(()=>[l(d(n.address),1)]),_:2},1024),e(m,null,{default:t(()=>[o("ul",ge,[o("li",be,[e(I,{to:"/client/details/",class:"btn btn-sm btn-soft-primary"},{default:t(()=>[Be]),_:1})]),o("li",ye,[e(T,{href:"#",class:"btn btn-sm btn-soft-info"},{default:t(()=>[Te]),_:1})]),o("li",Pe,[e(T,{href:"#jobDelete","data-bs-toggle":"modal",class:"btn btn-sm btn-soft-danger"},{default:t(()=>[ke]),_:1})])])]),_:1})]),_:2},1024))),128))]),_:1})]),_:1})]),e(B,{class:"justify-content-between align-items-center"},{default:t(()=>[e(u,{class:"col-auto me-auto"},{default:t(()=>[o("p",ve,[l("Showing "),o("b",null,d(i.currentPage),1),l(" to "),o("b",null,d(i.lastPage),1),l(" of "),o("b",null,d(i.totalRecords),1),l(" entries ")])]),_:1}),e(u,{class:"col-auto"},{default:t(()=>[e(P,{"no-body":"",class:"d-inline-block ms-auto mb-0"},{default:t(()=>[e(f,{class:"p-2"},{default:t(()=>[o("nav",we,[e(z,X({modelValue:i.currentPage,"onUpdate:modelValue":s[5]||(s[5]=n=>i.currentPage=n)},Z(this.listData(i.currentPage)),{pills:!0,"total-rows":i.totalRecords,"per-page":i.perPage}),null,16,["modelValue","total-rows","per-page"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Ie=W(ee,[["render",Ce]]);export{Ie as default};
